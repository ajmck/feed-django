{% extends "_layout.html" %}

{% block container %}
{% load static %}
<script src="{% static 'core/js/location.js' %}"> </script>

<div class="form-group">
    <form method="post" action="">

        {% csrf_token %}

        {# location hidden values #}
        <input id="form-lat"
               name="latitude"
               type="hidden">

        <input id="form-lon"
               name="longitude"
               type="hidden">

        {# text form #}
        <div class="submission input-group mb-3">

            <button class="input-group-prepend btn btn-default"
                    onclick="geoFindMe()"
                    style="border-radius: 0px;">
                <span class="fa fa-location-arrow"></span>
            </button>

    <textarea
            rows="2"
            name="{{ submission.body.name }}"
            maxlength="{{ submission.body.field.max_length }}"
            placeholder="Ask away..."
            class="submission form-control form-control-lg"
            required></textarea>

            <input type="submit"
                   class="input-group-append btn btn-primary"
                   style="border-radius: 0px;"
                   value="Submit"></input>

        </div>



    </form>
</div>


    <div class="post card bg-danger mb-3">
        <div class="card-body">
            <div class="row">
                <div class="col">
                    This is a development website. Things will break, and content will disappear. <a href="https://github.com/ajmck/Feed" target="_blank">Source code here.</a>
                </div>
            </div>

        </div>
    </div>





{% if latest_posts %}

{# TODO - allow user customisable queries (hot in category, most votes...) #}

{% for post in latest_posts %}
<a href="{% url 'core:detail' post.id %}" style="text-decoration: none;">
    <div class="post post-hover card mb-3">
        <div class="card-body">
            <div class="row">
                <div class="col">
                    {{ post.body }}
                </div>
            </div>

        </div>
    </div>
</a>
{% endfor %}

{% else %}
<p>No posts.</p>
{% endif %}

{% endblock container %}