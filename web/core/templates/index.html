{% extends "_layout.html" %}

{% block container %}
{% load static %}
<script src="{% static 'core/js/location.js' %}"> </script>

<div class="form-group">
    <form method="post" action="">

        {% csrf_token %}

        {# location hidden values #}
        <input id="form-lat"
               name="latitude"
               type="hidden">

        <input id="form-lon"
               name="longitude"
               type="hidden">

        {# text form #}
        <div class="submission input-group mb-3">

            {# TODO: Stop redirect on click #}
            {# nb. class changes in location.js (for colour of button) #}
            <button class="input-group-prepend btn btn-default"
                    id="form-location-button"
                    onclick="geoFindMe()"
                    style="border-radius: 0px;">
                <span class="fa fa-location-arrow"></span>
            </button>

    <textarea
            rows="2"
            name="{{ submission.body.name }}"
            maxlength="{{ submission.body.field.max_length }}"
            placeholder="Ask away..."
            class="submission form-control form-control-lg"></textarea>

            <input type="submit"
                   class="input-group-append btn btn-primary"
                   style="border-radius: 0px;"
                   value="Submit"></input>

        </div>



    </form>
</div>


    <div class="post card bg-danger mb-3">
        <div class="card-body">
            <div class="row">
                <div class="col">
                    This is a development website. Things will break, and content will disappear. <a href="https://github.com/ajmck/Feed" target="_blank">Source code here.</a>
                </div>
            </div>

        </div>
    </div>





{% if latest_posts %}

{# TODO - allow user customisable queries (hot in category, most votes...) #}

{% for post in latest_posts %}
<a href="{% url 'core:detail' post.id %}" style="text-decoration: none;">
    <div class="post post-hover card mb-3">
        <div class="card-body">
            <div class="post-novoting">

                    {{ post.body }}


                    <div class="post-details">
                        <span class="fas fa-comments" ></span>0
                        <span style="min-width: 2em;"></span>
                        <span class="far fa-clock"></span>Now
                    </div>
            </div>


            <div class="post-voting">
                <table>
                    <tr>
                        <td>
                            <a href="{% url 'core:post_vote_up' post.id %}">
                                <span class="fas fa-chevron-up"></span>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td><span>{{ post.vote_total }}</span></td>
                    </tr>
                    <tr>
                        <td>
                            <a href="{% url 'core:post_vote_down' post.id %}">
                                <span class="fas fa-chevron-down"></span>
                            </a>
                        </td>
                    </tr>
                </table>

            </div>

        </div>
    </div>
</a>
{% endfor %}

{% else %}
<p>No posts.</p>
{% endif %}

{% endblock container %}